{% extends "blogs/base.html" %}
{% load staticfiles %}
{% block content %}
<h1 class="white-text">User Profile</h1>
       
<div class="row">
    <div class="col s12 m12">
        
        <div class="card horizontal">
            <div class="card-image">
                {% if profile.avatar %}
                <img class="circle" src="{{ profile.avatar }}" style="width:180px;height:180px;">
                {% else %}
                <img class="circle" src="{% static '/images/empty-profile.png' %}" style="width:180px;height:180px;">
                {% endif %}
            </div>
            <div class="card-content">
                <span class="card-title">{{profile.user}}</span>
                <ul>
                    <li><label>Email</label><div class="value"><p>{{profile.user.email}}</p></div></li>
                    <li><label>Score</label><div class="value"><p>{{profile.score}}</p></div></li>
                    <li>
                        <label>Total Answer / Correct Answer</label>
                        <div class="value"><p>{{profile.total_answer_num}} / {{profile.correct_answer_num}}</p></div>
                    </li>
                </ul>

            </div>
          
        </div>

    </div>
</div>


<div class="separator">
    <i class="material-icons" style="color:black">favorite</i>&nbsp;
    <h2 class="content-separator">Favorite Posts</h2>
</div>
<div class="row">
    {% for post in profile.favorites %}

    {% if "Post" in post.kind %}
        <!-- Blog post card -->
        <div class="col s12 m6 l4 sortable-card" data-sort="{{ post.score }}">
            <div class="card blue-grey darken-1 post changecolor">
                <div class="card-content with-comments white-text post">
                    <div class="content-with-utility">
                        <div class="card-utility">
                            <i class="material-icons title">event_note</i>
                            {% if request.user.is_superuser %}
                            <i class="material-icons title fa-clickable fas fa-thumbtack tooltipped" data-position="left" data-tooltip="Click to Pin" id="pin-btn-{{post.id}}"></i>
                            {% endif %}
                            {% if post.id in request.user.userprofile.favorites_id %}
                                <i class="material-icons title fa-clickable fas fa-heart tooltipped" data-position="left" data-tooltip="Click to Unsave" id="like-btn-{{post.id}}"></i>
                            {% else %}
                                <i class="material-icons title fa-clickable far fa-heart tooltipped" data-position="left" data-tooltip="Click to Save" id="like-btn-{{post.id}}"></i>
                            {% endif %}
                        </div>
                        <div class="card-preview-content">
                            <span class="card-title">{{ post.title }}</span>
                            <div class="card-description post-preview">
                                <p>{{ post.detail|striptags|safe|truncatechars:90 }}</p>
                            </div>
                        </div>
                    </div>
                    <div class="card-comments">{{ post.comment_count_string }}</div>
                </div>
                <div class="card-action voting">
                    <div class="score-container">
                        <a class="btn-flat vote" style="padding-left: 0"><i id="downvote-{{ post.id }}" post_id="{{ post.id }}" class="material-icons">arrow_downward</i></a>
                        <span id="score-{{ post.id }}" class="score">{{ post.score }}</span>
                        <a class="btn-flat vote"><i id="upvote-{{ post.id }}" post_id="{{ post.id }}" class="material-icons">arrow_upward</i></a>
                    </div>
                    <a class="card-open waves-effect waves-light" href="/blogs/{{ post.id }}">Open</a>
                </div>
            </div>
        </div>
        
    {% elif "Question" in post.kind %}
        <!-- Question card -->
        <div class="col s12 m6 l4 sortable-card" data-sort="{{ post.score }}">
            <div class="card blue-grey darken-1 question changecolor">
                <div class="card-content with-comments white-text" style="min-height: 201px;display: flex;flex-direction: column;justify-content: space-between;">

                        <div class="content-with-utility">
                            <div class="card-utility">
                                <!-- <i class="material-icons title">event_note</i> -->
                                <i class="material-icons title far fa-question-circle" style="font-size: 32px"></i>
                                {% if request.user.is_superuser %}
                                <i class="material-icons title fa-clickable fas fa-thumbtack tooltipped" data-position="left" data-tooltip="Click to Pin" id="pin-btn-{{post.id}}"></i>
                                {% endif %}
                                {% if post.id in request.user.userprofile.favorites_id %}
                                    <i class="material-icons title fa-clickable fas fa-heart tooltipped" data-position="left" data-tooltip="Click to Unsave" id="like-btn-{{post.id}}"></i>
                                {% else %}
                                    <i class="material-icons title fa-clickable far fa-heart tooltipped" data-position="left" data-tooltip="Click to Save" id="like-btn-{{post.id}}"></i>
                                {% endif %}                                        
                            </div>
                            <div class="card-preview-content">
                                <span class="card-title">{{ post.title }}</span>
                                {% if 'Unsolved' in post.question_status %}
                                    <span class="new badge question-state unsolved" data-badge-caption=" ">{{ post.question_status }}</span>
                                {% else %}
                                    <span class="new badge question-state" data-badge-caption=" ">{{ post.question_status }}</span>
                                {% endif %}                                        
                            </div>

                        </div>
                        <div class="card-comments">{{ post.response_count_string }}</div>
                    
                    <!-- <span class="card-title" style="display:flex;"><i class="material-icons title">question_answer</i>{{ post.title }}</span>
                    <div class="card-comments">{{ post.comment_count_string }}</div> -->
                </div>
                <div class="card-action voting">
                    <div class="score-container">
                        <a class="btn-flat vote" style="padding-left: 0"><i id="downvote-{{ post.id }}" post_id="{{ post.id }}" class="material-icons">arrow_downward</i></a>
                        <span id="score-{{ post.id }}" class="score">{{ post.score }}</span>
                        <a class="btn-flat vote"><i id="upvote-{{ post.id }}" post_id="{{ post.id }}" class="material-icons">arrow_upward</i></a>
                    </div>
                    <a class="card-open waves-effect waves-light" href="/blogs/{{ post.id }}">Open</a>
                </div>
            </div>
        </div>
    {% elif "Image" in post.kind %}

        <!-- Image post card -->
        <div class="col s12 m6 l4 sortable-card" data-sort="{{ post.score }}">
            <div class="card blue-grey darken-1 changecolor">
                <div class="card-content with-comments white-text post" style="background: linear-gradient(to right, rgba(0, 0, 0, 0.5),rgba(0, 0, 0, 0)), url('{{ post.detail }}'); background-size: cover">
                    <div class="content-with-utility">
                        <div class="card-utility">
                            <i class="material-icons title">event_note</i>
                            {% if request.user.is_superuser %}
                                <i class="material-icons title fa-clickable fas fa-thumbtack tooltipped" data-position="left" data-tooltip="Click to Pin" id="pin-btn-{{post.id}}"></i>
                            {% endif %}
                            {% if post.id in request.user.userprofile.favorites_id %}
                                <i class="material-icons title fa-clickable fas fa-heart tooltipped" data-position="left" data-tooltip="Click to Unsave" id="like-btn-{{post.id}}"></i>
                            {% else %}
                                <i class="material-icons title fa-clickable far fa-heart tooltipped" data-position="left" data-tooltip="Click to Save" id="like-btn-{{post.id}}"></i>
                            {% endif %}
                        </div>
                        <div class="card-preview-content">
                            <span class="card-title">{{ post.title }}</span>
                        </div>
                    </div>
                    <div class="card-comments">{{ post.comment_count_string }}</div>
                </div>
                <div class="card-action voting">
                    <div class="score-container">
                        <a class="btn-flat vote" style="padding-left: 0"><i id="downvote-{{ post.id }}" post_id="{{ post.id }}" class="material-icons">arrow_downward</i></a>
                        <span id="score-{{ post.id }}" class="score">{{ post.score }}</span>
                        <a class="btn-flat vote"><i id="upvote-{{ post.id }}" post_id="{{ post.id }}" class="material-icons">arrow_upward</i></a>
                    </div>
                    <a class="card-open waves-effect waves-light" href="/blogs/{{ post.id }}">Open</a>
                </div>
            </div>
        </div>
    {% endif %}
    {% endfor %}

</div>

<div class="separator">
    <i class="material-icons" style="color:black">whatshot</i>&nbsp;
    <h2 class="content-separator">Top Five Posts</h2>
</div>
<div class="row">
    {% for post in profile.top_five_posts %}
        {% if "Post" in post.kind %}
        <!-- Blog post card -->
        <div class="col s12 m6 l4 sortable-card" data-sort="{{ post.score }}">
            <div class="card blue-grey darken-1 post changecolor">
                <div class="card-content with-comments white-text post">
                    <div class="content-with-utility">
                        <div class="card-utility">
                            <i class="material-icons title">event_note</i>
                            {% if request.user.is_superuser %}
                            <i class="material-icons title fa-clickable fas fa-thumbtack tooltipped" data-position="left" data-tooltip="Click to Pin" id="pin-btn-{{post.id}}"></i>
                            {% endif %}
                            {% if post.id in request.user.userprofile.favorites_id %}
                                <i class="material-icons title fa-clickable fas fa-heart tooltipped" data-position="left" data-tooltip="Click to Unsave" id="like-btn-{{post.id}}"></i>
                            {% else %}
                                <i class="material-icons title fa-clickable far fa-heart tooltipped" data-position="left" data-tooltip="Click to Save" id="like-btn-{{post.id}}"></i>
                            {% endif %}
                        </div>
                        <div class="card-preview-content">
                            <span class="card-title">{{ post.title }}</span>
                            <div class="card-description post-preview">
                                <p>{{ post.detail|striptags|safe|truncatechars:90 }}</p>
                            </div>
                        </div>
                    </div>
                    <div class="card-comments">{{ post.comment_count_string }}</div>
                </div>
                <div class="card-action voting">
                    <div class="score-container">
                        <a class="btn-flat vote" style="padding-left: 0"><i id="downvote-{{ post.id }}" post_id="{{ post.id }}" class="material-icons">arrow_downward</i></a>
                        <span id="score-{{ post.id }}" class="score">{{ post.score }}</span>
                        <a class="btn-flat vote"><i id="upvote-{{ post.id }}" post_id="{{ post.id }}" class="material-icons">arrow_upward</i></a>
                    </div>
                    <a class="card-open waves-effect waves-light" href="/blogs/{{ post.id }}">Open</a>
                </div>
            </div>
        </div>
        
    {% elif "Question" in post.kind %}
        <!-- Question card -->
        <div class="col s12 m6 l4 sortable-card" data-sort="{{ post.score }}">
            <div class="card blue-grey darken-1 question changecolor">
                <div class="card-content with-comments white-text" style="min-height: 201px;display: flex;flex-direction: column;justify-content: space-between;">

                        <div class="content-with-utility">
                            <div class="card-utility">
                                <!-- <i class="material-icons title">event_note</i> -->
                                <i class="material-icons title far fa-question-circle" style="font-size: 32px"></i>
                                {% if request.user.is_superuser %}
                                <i class="material-icons title fa-clickable fas fa-thumbtack tooltipped" data-position="left" data-tooltip="Click to Pin" id="pin-btn-{{post.id}}"></i>
                                {% endif %}
                                {% if post.id in request.user.userprofile.favorites_id %}
                                    <i class="material-icons title fa-clickable fas fa-heart tooltipped" data-position="left" data-tooltip="Click to Unsave" id="like-btn-{{post.id}}"></i>
                                {% else %}
                                    <i class="material-icons title fa-clickable far fa-heart tooltipped" data-position="left" data-tooltip="Click to Save" id="like-btn-{{post.id}}"></i>
                                {% endif %}                                        
                            </div>
                            <div class="card-preview-content">
                                <span class="card-title">{{ post.title }}</span>
                                {% if 'Unsolved' in post.question_status %}
                                    <span class="new badge question-state unsolved" data-badge-caption=" ">{{ post.question_status }}</span>
                                {% else %}
                                    <span class="new badge question-state" data-badge-caption=" ">{{ post.question_status }}</span>
                                {% endif %}                                        
                            </div>

                        </div>
                        <div class="card-comments">{{ post.response_count_string }}</div>
                    
                    <!-- <span class="card-title" style="display:flex;"><i class="material-icons title">question_answer</i>{{ post.title }}</span>
                    <div class="card-comments">{{ post.comment_count_string }}</div> -->
                </div>
                <div class="card-action voting">
                    <div class="score-container">
                        <a class="btn-flat vote" style="padding-left: 0"><i id="downvote-{{ post.id }}" post_id="{{ post.id }}" class="material-icons">arrow_downward</i></a>
                        <span id="score-{{ post.id }}" class="score">{{ post.score }}</span>
                        <a class="btn-flat vote"><i id="upvote-{{ post.id }}" post_id="{{ post.id }}" class="material-icons">arrow_upward</i></a>
                    </div>
                    <a class="card-open waves-effect waves-light" href="/blogs/{{ post.id }}">Open</a>
                </div>
            </div>
        </div>
    {% elif "Image" in post.kind %}

        <!-- Image post card -->
        <div class="col s12 m6 l4 sortable-card" data-sort="{{ post.score }}">
            <div class="card blue-grey darken-1 changecolor">
                <div class="card-content with-comments white-text post" style="background: linear-gradient(to right, rgba(0, 0, 0, 0.5),rgba(0, 0, 0, 0)), url('{{ post.detail }}'); background-size: cover">
                    <div class="content-with-utility">
                        <div class="card-utility">
                            <i class="material-icons title">event_note</i>
                            {% if request.user.is_superuser %}
                                <i class="material-icons title fa-clickable fas fa-thumbtack tooltipped" data-position="left" data-tooltip="Click to Pin" id="pin-btn-{{post.id}}"></i>
                            {% endif %}
                            {% if post.id in request.user.userprofile.favorites_id %}
                                <i class="material-icons title fa-clickable fas fa-heart tooltipped" data-position="left" data-tooltip="Click to Unsave" id="like-btn-{{post.id}}"></i>
                            {% else %}
                                <i class="material-icons title fa-clickable far fa-heart tooltipped" data-position="left" data-tooltip="Click to Save" id="like-btn-{{post.id}}"></i>
                            {% endif %}
                        </div>
                        <div class="card-preview-content">
                            <span class="card-title">{{ post.title }}</span>
                        </div>
                    </div>
                    <div class="card-comments">{{ post.comment_count_string }}</div>
                </div>
                <div class="card-action voting">
                    <div class="score-container">
                        <a class="btn-flat vote" style="padding-left: 0"><i id="downvote-{{ post.id }}" post_id="{{ post.id }}" class="material-icons">arrow_downward</i></a>
                        <span id="score-{{ post.id }}" class="score">{{ post.score }}</span>
                        <a class="btn-flat vote"><i id="upvote-{{ post.id }}" post_id="{{ post.id }}" class="material-icons">arrow_upward</i></a>
                    </div>
                    <a class="card-open waves-effect waves-light" href="/blogs/{{ post.id }}">Open</a>
                </div>
            </div>
        </div>
    {% endif %}

    {% endfor %}

</div>


<div class="separator">
    <i class="material-icons" style="color:black">event_note</i>&nbsp;
    <h2 class="content-separator">Posted Article</h2> 
</div>
<div class="row">
{% for art in article %}
    <!-- Blog post card -->
    <div class="col s12 m6 l3 sortable-card" data-sort="{{ post.score }}">
            <div class="card blue-grey darken-1 question">
                <div class="card-content with-comments white-text post">
                    <div class="content-with-utility">
                        <div class="card-utility">
                            <i class="material-icons title">event_note</i>
                        </div>
                        <div class="card-preview-content">
                            <span class="card-title">{{ art.title }}</span>
                            <div class="card-description post-preview">
                                <p>{{ art.detail|striptags|safe|truncatechars:90 }}</p>
                            </div>
                        </div>
                    </div>
                    <div class="card-comments">{{ art.comment_count_string }}</div>
                </div>
                <div class="card-action voting">
                    <div class="score-container">
                        <span id="score-{{ art.id }}" class="score">{{ art.score }}</span>
                    </div>
                    <a class="card-open" href="/blogs/{{ art.id }}">Open</a>
                </div>
            </div>
        </div>
{% endfor %}
</div>

<div class="separator">
    <i class="material-icons" style="color:black">image</i>&nbsp;
    <h2 class="content-separator">Posted Images</h2>
</div>
<div class="row">
    {% for image in images %}

    <div class="col s12 m6 l3 sortable-card">
        <div class="card blue-grey darken-1">
            <div class="card-content with-comments white-text post" style="background: linear-gradient(to right, rgba(0, 0, 0, 0.5),rgba(0, 0, 0, 0)), url('{{ image.detail }}'); background-size: cover">
                <div class="content-with-utility">
                    <div class="card-utility">
                        <i class="material-icons title">event_note</i>
                    </div>
                    <div class="card-preview-content">
                        <span class="card-title">{{ image.title }}</span>
                    </div>
                </div>
                <div class="card-comments">{{ image.comment_count_string }}</div>
            </div>
            <div class="card-action voting">
                <div class="score-container">
                    <span id="score-{{ image.id }}" class="score">{{ image.score }}</span>
                </div>
                <a class="card-open" href="/blogs/{{ image.id }}">Open</a>
            </div>
        </div>
    </div>

    {% endfor %}
</div>

<div class="separator">
    <i class="material-icons" style="color:black">question_answer</i>&nbsp;
    <h2 class="content-separator">Posted Question</h2>
</div>

<div class="row">
    {% for que in qna %}
    <div class="col s12 m6 l3 sortable-card" data-sort="{{ post.score }}">
        <div class="card blue-grey darken-1 question">
            <div class="card-content with-comments white-text" style="min-height: 201px;display: flex;flex-direction: column;justify-content: space-between;">

                <div class="content-with-utility">
                    <div class="card-utility">
                        <!-- <i class="material-icons title">event_note</i> -->
                        <i class="material-icons title far fa-question-circle" style="font-size: 32px"></i>
                        <!--{% if request.user.is_superuser %}-->
                        <!--<i class="material-icons title fa-clickable fas fa-thumbtack tooltipped" data-position="left" data-tooltip="Click to Unpin" id="pin-btn-{{post.id}}"></i>-->
                        <!--{% endif %}-->
                        <!--{% if post.id in request.user.userprofile.favorites_id %}-->
                            <!--<i class="material-icons title fa-clickable fas fa-heart tooltipped" data-position="left" data-tooltip="Click to Unsave" id="like-btn-{{post.id}}"></i>-->
                        <!--{% else %}-->
                            <!--<i class="material-icons title fa-clickable far fa-heart tooltipped" data-position="left" data-tooltip="Click to Save" id="like-btn-{{post.id}}"></i>-->
                        <!--{% endif %}                                        -->
                    </div>
                    <div class="card-preview-content">
                        <span class="card-title">{{ que.title }}</span>
                        {% if 'Unsolved' in que.question_status %}
                            <span class="new badge question-state unsolved" data-badge-caption=" ">{{ que.question_status }}</span>
                        {% else %}
                            <span class="new badge question-state" data-badge-caption=" ">{{ que.question_status }}</span>
                        {% endif %}                                        
                    </div>

                </div>
                <div class="card-comments">{{ que.response_count_string }}</div>
            </div>
            <div class="card-action voting">
                <div class="score-container">
                    <span id="score-{{ que.id }}" class="score">{{ que.score }}</span>
                </div>
                <a class="card-open" href="/blogs/{{ que.id }}">Open</a>
            </div>
        </div>
    </div>
    {% endfor %}    
</div>

<div class="separator">
    <i class="material-icons" style="color:black">format_list_bulleted</i>&nbsp;
    <h2 class="content-separator">Quiz</h2>
</div>
<div class="row">
    {% for qz in quiz %}

    <div class="col s12 m6 l3">
        <div class="card blue-grey darken-1 post">
            <div class="card-content with-comments white-text post">
                <div>
                    <span class="card-title">{{ qz.title }}</span>
                    <div class="card-description post-preview">
                        <p>{{ qz.detail|striptags|safe|truncatechars:90 }}</p>
                    </div>
                </div>
                
            </div>
            <div class="card-action voting">

                <a class="card-open" href="/quiz/{{ qz.id }}">Open</a>
            </div>
        </div>
    </div>
    {% endfor %}    
    
</div>

{% endblock %}